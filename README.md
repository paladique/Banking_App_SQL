# üè¶  AI Banking App with SQL, Flask and Typescript

**AI Banking App** is an interactive web application designed to simulate a modern banking dashboard. Its primary purpose is to serve as an educational tool, demonstrating how SQL-based databases are leveraged across different types of workloads: **OLTP**, **OLAP**, and **AI-driven analysis**.

Through a hands-on interface, users can see the practical difference between writing a new transaction to the database, running complex analytical queries on historical data, and using natural language to ask an AI to query the database for them.

---

## ‚ú® Features

### Banking Application

- **The Banking Dashboard**: A central hub to view account balance and navigate the application.
- **Transactions (OLTP)**: View a real-time list of all past transactions. This demonstrates a typical high-volume, read-heavy OLTP workload.
- **Money Transfer (OLTP)**: Perform transfers between accounts. This showcases a classic atomic, write-heavy OLTP operation that must be fast and reliable.
- **Financial Analytics (OLAP)**: Explore an analytics dashboard with charts and summaries of spending habits. This represents an OLAP workload, running complex, aggregate queries over a large dataset.
- **AI Agent (AI Workload)**: 
    - Ask questions about your finances in plain English (e.g., "How much did I spend on groceries last month?"). An AI agent translates your question into a SQL query, executes it, and returns the answer.
    - Get customer support from using RAG over documents
    - Open new account, transfer money in plain English through an action oriented data agent

### Agent Analytics Service
- A separate service which can be run to capture, in real-time, the operational data generated by the agentic solution and store it to a Fabric SQL database via a prescribed data model.
---

## üõ†Ô∏è Tech Stack

| Layer    | Technology                            |
| -------- | ------------------------------------- |
| Frontend | React, Vite, TypeScript, Tailwind CSS |
| Backend  | Python, Flask, LangChain, LangGraph              |
| Database | Fabric SQL Database                   |
| AI       | Azure OpenAI API                      |

---

## üöÄ Getting Started - Run locally

### üîß Prerequisites

- [Node.js](https://nodejs.org/) (v18 or later)
- [Python](https://www.python.org/) (v3.9 or later)
- Create two [Fabric SQL Databases](https://learn.microsoft.com/en-us/fabric/database/sql/create), one for the customer banking data, another for agentic operational data.
- An [Azure OpenAI API Key](https://azure.microsoft.com/en-us/products/ai-services/openai-service)
- ODBC Driver for SQL Server 18
- Recommend VSCode as tested in VS Code only

---

### üìÖ 1. Clone the Repository

```bash
git clone https://github.com/mehrsa/Banking_App_SQL_with_DataModel
cd Banking_App_SQL
```

### üóÑÔ∏è 2. Set Up the Databases

1. [Register application with Entra ID by](https://learn.microsoft.com/en-us/rest/api/fabric/articles/get-started/fabric-api-quickstart#create-app-registration)
    1. Sign in to the [Microsoft Entra admin center](https://entra.microsoft.com/) as at least a Cloud Application Administrator.

    1. Browse to Applications > App registrations.

    1. Click on New registration.

    1. Enter a display Name for your application, and add Public client redirect URI http://localhost
    
    1. Select `Register`

1. In the registered application, copy the application/client id and paste it into the `client_id` field of config.json, 

1. In the same `config.json` file, add your `username` in the field as `username@domain`

1. Run the `retrieve_token.py` script and copy the token output, paste into `access_token` field of `config.json`

1. Run dbsetup.py, it will:

    1. Create a populated SQL Fabric database called **customer_banking_data**.
    1. Create another populated SQL database in Fabric called **banking_app** for storing the agentic operational data.

Remember to grab the connection strings and put them in appropriate variables in .env for secure connection.

Alternatively, you may do this in Fabric:

a. Create a database called customer_banking_data.The schema.sql file in the backend repository contains all the necessary T-SQL commands to create the required tables (users, accounts, transactions) and populate them with sample data.

b. Create another SQL database in Fabric called banking_app for storing the agentic operational data. Use the agent_data_model.sql to initialize the required tables for the agentic data model.

### ‚öôÔ∏è 3. Configure the Backend (Flask API)

```bash
cd backend
python3 -m venv venv
source .\venv\Scripts\activate # (on Windows)
pip install -r requirements.txt
```

rename the sample env file in `backend/` directory called .**env.sample** to **.env**, and populate its variables with your own 


---

### üíª 4. Configure the Frontend (React + Vite)

From the root project directory:

```bash
npm install
```

---

### ‚ñ∂Ô∏è 5. Run Jupyter Notebook to create embeddings from the PDF Document

You need to ingest embeddings from the PDF in the SQL Database

a. Copy the .env file in the folder **Data_Ingest**.
b. From the folder **Data_Ingest** create a new virtual Python environment:

```bash
python3 -m venv new_env
source new_env/bin/activate  # Or .\new_env\Scripts\activate on Windows
pip install -r requirements.txt
```

c. Open the Jupyter Python Notebook in the path: Backend/Documentation ingestion_pdf_Bank_App.ipynb

d. Run all the cells in the notebook

### ‚ñ∂Ô∏è 6. Run the Application

#### Terminal 1: Start Backend

First ensure you have run **az login** to log into your Azure account.

```bash
cd backend
python launcher.py
```
This will launch two services:
1. Banking service on: [http://127.0.0.1:5001](http://127.0.0.1:5001)
2. Analytics service on: [http://127.0.0.1:5001](http://127.0.0.1:5002)

(you will be prompeted for credentials during this.)

#### Terminal 2: Start Frontend

Go to the root of your folder.

```bash
npm run dev
```

Frontend will run on: [http://localhost:5173](http://localhost:5173)

---

## ü§ù Contributing

Contributions are welcome!\
If you have suggestions for improvements or find any bugs, feel free to [open an issue](https://github.com/Banking_App_SQL/issues) or submit a pull request.
